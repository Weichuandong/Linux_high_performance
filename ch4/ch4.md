## 第四章 TCP/IP通信案例：访问Internet上的Web服务器

### 代理服务器

- 在HTTP通信链上，客户端和目标服务器之间通常存在某些中转代理服务器，它们提供对目标资源的中转访问。

- 按使用方式和作用，可以分为正向代理服务器，反向代理服务器和透明代理服务器。
  - 正向代理：需要客户端自己设置代理服务器的地址。之后客户的每次请求都将直接发送到该代理服务器，并由代理服务器请求目标资源。比如防火墙内的局域网机器要访问Internet，或访问外网。
  - 反向代理：设置在服务器端，用代理服务器来接收Internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从内部服务器上得到的结果返回给客户端。
  - 透明代理：设置在网关上，用户访问Internet的数据报必然经过网关，如果在网关上设置代理，则该代理对用户来说是透明的。透明代理可以看作是正常代理的特殊情况。

### 访问步骤

- 输入访问资源的url；
- 如果有缓存机制，就先看缓存中是否有该网页，若有就不用再进行接下来的步骤；
- DNS解析：一般是先看有无缓存->/etc/hosts文件中有无映射->/etc/host.conf中查看DNS服务器地址并求助于DNS；
- 建立TCP连接：这一步可能会经历路由器寻址，arp查物理地址等步骤；
- 发送http请求。
- 注意：如果有前向代理服务器，那么一般用户会先和代理服务器建立TCP连接并向它发送http请求，然后代理服务器再做上述的操作。

